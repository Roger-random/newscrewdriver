---
layout: post
title: Investigating MP1584 For Solar Power
date: 2022-02-28 12:30:00.000000000 +00:00
type: post
post_id: '28794'
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Projects
tags:
- ESP8266
- MP1584
meta:
  _last_editor_used_jetpack: block-editor
  _thumbnail_id: '28711'
  _edit_last: '98499281'
  _publicize_job_id: '69589989216'
  timeline_notification: '1646080205'
  _elasticsearch_data_sharing_indexed_on: '2024-11-18 13:30:58'
author:
  login: inkarc
  email: luxo.lamp@gmail.com
  display_name: Roger Cheng
  first_name: Roger
  last_name: Cheng
permalink: "/2022/02/28/investigating-mp1584-for-solar-power/"
---
<p><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"><br />
<!-- wp:paragraph --><html><body></p>
<p>I am happy with the <a href="https://newscrewdriver.com/2022/02/27/a-tale-of-two-adcs-esp32-versus-ina219/">performance I've seen so far of an INA219 DC voltage/current sensor</a>, and it is one step closer to the goal of a homebuilt power output monitor for my Harbor Freight solar array. All the major pieces are now in place: I have a working INA219, driven by an ESP8266, running code generated by ESPHome, with resulting data collected by Home Assistant.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>The next challenge I wanted to tackle was to make this system run exclusively on solar power <em><strong>without a battery</strong></em>. The daytime scenario is easy: solar panel power can feed into MP1584 buck converter to power the circuit. The night scenario is also easy: there's no power and nothing happens. The hard part comes during the transition between those scenarios: gracefully power up around sunrise, and gracefully shut down around sunset. I don't expect this exploration to be easy as it will have to deal with all the vague parts of the real analog world. Very different from the digital thinking my brain is familiar with.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>But before I go into the real world, I can explore a crude simulation on my workbench. I connected the input wires to my bench power supply to see how the system behaves. From zero to three volts nothing appears to happen, which was expected. From approximately five volts and up, the system is up and running. But between three and five volts, I hear a disconcerting screech from the buck converter module, and the ESP8266 seems to startup erratically. There is a blue LED that is expected to illuminate once, for a fraction of a second, during ESP8266 power-up. But when I hear the screech, I also see the LED blink seemingly randomly. Implying that ESP8266 would try to start up but fail, then try again, and repeat.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>It looks like I need to <a href="https://newscrewdriver.com/2022/03/01/probing-mp1584-enable-pin/">better understand the expected behavior</a> for a MP1584 during this borderline scenario, and see how it aligns with my observations.</p>
<p><!-- /wp:paragraph --><br />
</body></html></p>
