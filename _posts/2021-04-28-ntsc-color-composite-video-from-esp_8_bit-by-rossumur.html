---
layout: post
title: NTSC Color Composite Video From ESP_8_BIT by rossumur
date: 2021-04-28 12:30:00.000000000 +00:00
type: post
post_id: '25644'
parent_id: '0'
published: true
password: ''
status: publish
categories: []
tags:
- Composite Video
- ESP32
- ESP_8_BIT
- NTSC
meta:
  _last_editor_used_jetpack: block-editor
  _thumbnail_id: '25647'
  _publicize_job_id: '57728038735'
  timeline_notification: '1619638260'
  _elasticsearch_data_sharing_indexed_on: '2024-11-18 13:29:25'
author:
  login: inkarc
  email: luxo.lamp@gmail.com
  display_name: Roger Cheng
  first_name: Roger
  last_name: Cheng
permalink: "/2021/04/28/ntsc-color-composite-video-from-esp_8_bit-by-rossumur/"
---
<p><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"><br />
<!-- wp:paragraph --><html><body></p>
<p>I've buried my head in remote-control vehicles for a while now, most recently writing code for my own Sawppy rover and <a href="https://newscrewdriver.com/2021/04/27/miha-kocars-esp8266-remote-control/">looking over code written by others</a>. Rover fatigue is setting in, so I'm going to look at a different topic as a change of pace.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>About a year and a half ago Emily and I <a rel="noreferrer noopener" href="https://newscrewdriver.com/2019/12/21/examining-composite-video-signal-generated-by-microcontrollers/" target="_blank">had a study session examining composite video signals</a>. Using an oscilloscope to compare and contrast between different signal sources. Our reference was a commercial video camera, and we compared them against outputs generated by various microcontroller libraries. Two that run on ATmega328 Arduino, and one running on ESP32.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>One thing they all had in common was that they were all in grayscale. The extra signal required for color NTSC composite video were beyond the reach of stock hardware. People have done some very creative things with hacking on oscillators to change operating frequencies, but even with such hacking the capability was quite limited. We thought color would be out of reach except by using chips with dedicated hardware such as the <a href="https://www.parallax.com/propeller/qna-mobile/Advanced/Content/QnaTopics/QnaVideo.htm">Parallax Propeller chip</a>.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>I was so happy to learn we were wrong! GitHub user rossumur found a way to generate color NTSC composite video signal from an ESP32 on stock unmodified hardware. The clever video hack was done using, of all things, an <a rel="noreferrer noopener" href="https://github.com/rossumur/esp_8_bit#the-magic-of-the-audio-pll" target="_blank"><strong><em>audio</em></strong> peripheral called the Phase Locked Loop</a>. This color video capability formed the basis of an <a href="https://hackaday.com/2020/06/09/run-your-favorite-8-bit-games-on-an-esp32/" target="_blank" rel="noreferrer noopener">8-bit video game console project</a> called <a rel="noreferrer noopener" href="https://github.com/rossumur/esp_8_bit" target="_blank">ESP_8_BIT</a>, and I had to take a closer look.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>For most projects I find online, I spend time researching the code before I bother investing equipment. But this project had such minimal hardware requirements that I decided to build a test unit first. I didn't even need a circuit board: the video pin can be wired straight through and the audio pin only required a resistor and a capacitor. A few wires on a 0.1" pitch connector and <a rel="noreferrer noopener" href="https://newscrewdriver.com/2018/12/12/sony-kp-53s35-signal-board-a-components/" target="_blank">composite video jacks salvaged from an old TV</a> were all I needed to install those parts on an ESP32 dev board.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Compared to the effort of wiring things up to my ESP32 dev board, getting my composite video screen actually took more effort. I had an old tube TV gathering dust sitting under a lot of other stuff, and it took more time to dig it up than to perform my ESP32 wiring. But once everything is plugged in and turned on, I could see the Atari logo on screen. And most importantly: it was in color! I'm going to follow this rainbow to the pot of ESP32 coding gold at the end, even if <a href="https://newscrewdriver.com/2021/04/29/esp_8_bit-atari-mode-mysteriously-stopped-working/">this adventure had an inauspicious start</a>.</p>
<p><!-- /wp:paragraph --><br />
</body></html></p>
