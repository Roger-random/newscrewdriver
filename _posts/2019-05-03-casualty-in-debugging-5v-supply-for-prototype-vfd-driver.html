---
layout: post
title: Casualty In Debugging 5V Supply for Prototype VFD Driver
date: 2019-05-03 12:58:24.000000000 +00:00
type: post
post_id: '18432'
parent_id: '0'
published: true
password: ''
status: publish
categories:
- PIC Microcontrollers
- Projects
- Raspberry Pi
tags:
- MP1584
- VFD
meta:
  _oembed_cd6faf9ee821f49afadce343190e64df: <div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="550" data-dnt="true"><p lang="en" dir="ltr">Made
    some little eyes on the vfd that <a href="https://twitter.com/hashtag/regorlas?src=hash&amp;ref_src=twsrc%5Etfw">#regorlas</a>
    and I are working on. They&#39;re blinky! <a href="https://twitter.com/hashtag/notaclock?src=hash&amp;ref_src=twsrc%5Etfw">#notaclock</a>
    <a href="https://t.co/xGeNXS9GKf">pic.twitter.com/xGeNXS9GKf</a></p>&mdash; Emily
    Velasco (@MLE_Online) <a href="https://twitter.com/MLE_Online/status/1124169724969963520?ref_src=twsrc%5Etfw">May
    3, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>
  _oembed_time_cd6faf9ee821f49afadce343190e64df: '1556913506'
  _oembed_time_0846d34bfb6ab600c3eaadead409481f: '1556913508'
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
  _publicize_job_id: '30431578495'
  _oembed_0846d34bfb6ab600c3eaadead409481f: <div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="550" data-dnt="true"><p lang="en" dir="ltr">Made
    some little eyes on the vfd that <a href="https://twitter.com/hashtag/regorlas?src=hash&amp;ref_src=twsrc%5Etfw">#regorlas</a>
    and I are working on. They&#39;re blinky! <a href="https://twitter.com/hashtag/notaclock?src=hash&amp;ref_src=twsrc%5Etfw">#notaclock</a>
    <a href="https://t.co/xGeNXS9GKf">pic.twitter.com/xGeNXS9GKf</a></p>&mdash; Emily
    Velasco (@MLE_Online) <a href="https://twitter.com/MLE_Online/status/1124169724969963520?ref_src=twsrc%5Etfw">May
    3, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>
  timeline_notification: '1556913508'
  _oembed_ea7934ca53f4410b60e598d46807a867: <div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="550" data-dnt="true"><p lang="en" dir="ltr">Made
    some little eyes on the vfd that <a href="https://twitter.com/hashtag/regorlas?src=hash&amp;ref_src=twsrc%5Etfw">#regorlas</a>
    and I are working on. They&#39;re blinky! <a href="https://twitter.com/hashtag/notaclock?src=hash&amp;ref_src=twsrc%5Etfw">#notaclock</a>
    <a href="https://t.co/xGeNXS9GKf">pic.twitter.com/xGeNXS9GKf</a></p>&mdash; Emily
    Velasco (@MLE_Online) <a href="https://twitter.com/MLE_Online/status/1124169724969963520?ref_src=twsrc%5Etfw">May
    3, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>
  _oembed_time_ea7934ca53f4410b60e598d46807a867: '1556913511'
  _oembed_d391022424f3ccc2762ec6e9591e1718: <div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="500" data-dnt="true"><p lang="en" dir="ltr">Made
    some little eyes on the vfd that <a href="https://twitter.com/hashtag/regorlas?src=hash&amp;ref_src=twsrc%5Etfw">#regorlas</a>
    and I are working on. They&#39;re blinky! <a href="https://twitter.com/hashtag/notaclock?src=hash&amp;ref_src=twsrc%5Etfw">#notaclock</a>
    <a href="https://t.co/xGeNXS9GKf">pic.twitter.com/xGeNXS9GKf</a></p>&mdash; Emily
    Velasco (@MLE_Online) <a href="https://twitter.com/MLE_Online/status/1124169724969963520?ref_src=twsrc%5Etfw">May
    3, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>
  _oembed_time_d391022424f3ccc2762ec6e9591e1718: '1556913514'
  _thumbnail_id: '18433'
  _edit_last: '98499281'
  _oembed_6850cbc93463542b6b36008beddced33: "{{unknown}}"
  _elasticsearch_data_sharing_indexed_on: '2024-11-18 13:24:27'
author:
  login: inkarc
  email: luxo.lamp@gmail.com
  display_name: Roger Cheng
  first_name: Roger
  last_name: Cheng
permalink: "/2019/05/03/casualty-in-debugging-5v-supply-for-prototype-vfd-driver/"
---
<p><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"><br />
<html><body>
<p>Once we had <a href="https://newscrewdriver.com/2019/05/02/prototype-vfd-driver-pcb-debugged/">functionality of our prototype VFD driver figured out</a>, we turned our attention to the other problem that cropped up earlier in our <a href="https://newscrewdriver.com/2019/04/23/salvaged-vfd-power-supply-and-debugging/">initial integration with the original power supply transformer</a>: our 5V rail could support the PIC microcontroller and associated chips, plus putting a voltage bias on the filament. But when put a Raspberry Pi on the circuit, our 5V sagged low enough to put our Pi into a power brown-out reset loop.</p>
<p>Since the <a href="https://newscrewdriver.com/2017/07/27/powering-the-raspberry-pi-3-with-mp1584-voltage-step-down-converter/">MP1584 voltage regulator we used</a> has proven capable of powering a Pi in the past, this was puzzling. So we started quantifying our system starting with measuring the amperage draw of our 5V circuit. It was well within the 3A maximum draw supported by the regulator, so our next thought was a dirty output wave. Putting the output on an oscilloscope, the 5V line looked pretty clean so that was not the explanation.</p>
<p>The next experiment was to isolate the 5V supply chain. Instead of supplying the MP1584 voltage regulator with power from the rectified output of a transformer rail, we're going to use a two-cell lithium polymer battery. If this worked, we'll know the problem is upstream in the transformer or rectifier. If it doesn't, we'll know the problem is the regulator or further downstream.</p>
<p>Unfortunately the experiment failed due to a wiring error, which destroyed the MP1584 voltage regulator. The title picture shows the entire regulator module with a U.S. quarter dollar coin for scale.</p>
<p>And here's a close-up of the dead MP1584 chip. The glossy blob in the upper left is plastic that has melted and resolidified. The bump in the middle was a tiny volcano where smoke pushed up through the casing and escaped.</p>
<p><img class=" size-full wp-image-18434 aligncenter" src="https://newscrewdriver.com/wp-content/uploads/2019/05/mp1584en-chip-with-melted-hole.jpg" alt="MP1584EN chip with melted hole" width="1600" height="900"></p>
<p>Looking on the bright side, we are no longer suspicious of the MP1584 chip's functionality. We now know for sure it doesn't work!</p>
<p>Debugging continued with help of a benchtop power supply delivering 5V. Probing with a volt meter through the circuit, and seeing voltage drop along the supply path, we decided our problem wasn't any single wiring errors in the circuit. We just had too many thin wires and connectors involved in the 5V supply path. We had put our Raspberry Pi at the end of the chain of 5V parts, and it couldn't draw enough power to run. Not because of any single large obstacle but because of the cumulative effect of lots of little obstacles.</p>
<p>To test this hypothesis, we reversed the chain so our 5V supply entered the system at the Pi then propagated to the rest of the circuit. With this change -- and no other change in the circuit -- everything started working. This is a valuable lesson to a software person who is used to thinking in terms of digital logic: It's easy to think 5V rail is 5V as long as there are wires connecting them. This simplification creates a blind spot: the real world is analog and our 5V rail will degrade to a 4V rail when too-thin wires are used!</p>
<p>With that problem solved, we can now start playing with VFD patterns. See what works and see what doesn't.</p>
<p>https://twitter.com/MLE_Online/status/1124169724969963520</p>
<p> </p>
<p></body></html></p>
