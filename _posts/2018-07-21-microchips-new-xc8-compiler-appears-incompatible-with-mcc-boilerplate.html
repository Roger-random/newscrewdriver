---
layout: post
title: Microchip's New XC8 Compiler Appears Incompatible With MCC Boilerplate
date: 2018-07-21 09:00:15.000000000 +00:00
type: post
post_id: '16511'
parent_id: '0'
published: true
password: ''
status: publish
categories:
- C
- PIC Microcontrollers
tags: []
meta:
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
  timeline_notification: '1532188862'
  _publicize_job_id: '20247396754'
  _thumbnail_id: '16512'
  _elasticsearch_data_sharing_indexed_on: '2024-11-18 13:21:51'
author:
  login: inkarc
  email: luxo.lamp@gmail.com
  display_name: Roger Cheng
  first_name: Roger
  last_name: Cheng
permalink: "/2018/07/21/microchips-new-xc8-compiler-appears-incompatible-with-mcc-boilerplate/"
---
<p><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"><br />
<html><body>
<p>For the purposes of experimenting with a Pololu stepper motor driver, I wanted to generate pulses from a PIC running a simple program. This meant downloading and installing the latest tools from Microchip for 8-bit PIC development: The <a href="http://microchipdeveloper.com/mplabx:start">MPLAB X IDE</a>, the <a href="http://microchipdeveloper.com/xc8:start">XC8 compiler</a>, and the <a href="http://microchipdeveloper.com/mplabx:mcc">MPLAB Code Configurator</a> (MCC).</p>
<p>With these tools set up, I pulled down my <a href="https://github.com/Roger-random/unipolar_stepper_pan_base">previous PIC stepper motor project</a> intending to use it as a starting point. The stepper driver portion will be different, but I wanted the analog dial capability to adjust speed and direction. Before I start modifying code, though, I hit "Build" to make sure everything still compiled.</p>
<p>It did not.</p>
<p><code>In file included from mcc_generated_files/mcc.c:74:</code><br />
<code>In file included from mcc_generated_files/mcc.h:52:</code><br />
<code>mcc_generated_files/interrupt_manager.h:110:6: error: variable has incomplete type 'void'</code><br />
<code>void interrupt INTERRUPT_InterruptManager(void);</code><br />
<code>^</code><br />
<code>mcc_generated_files/interrupt_manager.h:110:15: error: expected ';' after top level declarator</code><br />
<code>void interrupt INTERRUPT_InterruptManager(void);</code><br />
<code>^</code><br />
<code>;</code><br />
<code>2 errors generated.</code><br />
<code>(908) exit status = 1</code></p>
<p>Since "void" is a very fundamental type for C programs, this error tells me this isn't the matter of a minor typo, something is wrong at a very basic level. As a test, I created a new MPLAB project with a bare skeleton generated by MCC. This "Hello World" program failed to compile in the same way, indicating the problem is a system configuration issue.</p>
<p>A little digging around found the issue was introduced with <a href="http://microchipdeveloper.com/xc8:whats-new-in-xc8-2-0">XC8 compiler version 2.0</a>, introduced just a few months ago in May. It moves C language support up to C99, keeping up with industry standards. However, this change also broke compatibility with old code. Not just old code sitting on a hobbyist's Github page, but also old boilerplate code generated by MCC.</p>
<p>I expect that Microchip will eventually update these templates in a future MCC update, but for now, PIC programmers that use MCC for rapid prototyping will need to change their project settings to fall back to the older C90 standards. See <a href="http://microchipdeveloper.com/xc8:moving-to-xc8-2-0">xc8 2.0 migration document here</a> for more details on this workaround.</p>
<p>Â </p>
<p></body></html></p>
