---
layout: post
title: ESP32 Grbl Controller Breadboard Prototype
date: 2019-08-17 12:30:54.000000000 +00:00
type: post
post_id: '19209'
parent_id: '0'
published: true
password: ''
status: publish
categories:
- ESP32
- Projects
tags:
- XY Stage
meta:
  _thumbnail_id: '19195'
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
  _oembed_e207cec343a70a21906a8acaa1019047: '<div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="500" data-dnt="true"><p lang="en" dir="ltr">Tonight
    at <a href="https://twitter.com/hashtag/SGVHAK?src=hash&amp;ref_src=twsrc%5Etfw">#SGVHAK</a>:
    decades old industrial stepper motor takes orders from modern darling ESP32 running
    GRBL. <a href="https://t.co/P1A4GZ945h">pic.twitter.com/P1A4GZ945h</a></p>&mdash;
    Roger Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1161094071437279232?ref_src=twsrc%5Etfw">August
    13, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>'
  _publicize_job_id: '34211116189'
  timeline_notification: '1566070353'
  _oembed_time_e207cec343a70a21906a8acaa1019047: '1566091459'
  _elasticsearch_data_sharing_indexed_on: '2024-11-18 13:25:19'
author:
  login: inkarc
  email: luxo.lamp@gmail.com
  display_name: Roger Cheng
  first_name: Roger
  last_name: Cheng
permalink: "/2019/08/17/esp32-grbl-controller-breadboard-prototype/"
---
<p><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"><br />
<html><body></p>
<p>An <a href="https://newscrewdriver.com/2019/08/16/evaluate-grbl-for-xy-stage/">ESP32 plus Grbl motion control software</a> seems like a good candidate for running an old industrial XY table, definitely promising enough to move forward with prototyping. I had originally intended to use an <a href="https://amzn.to/2lD9ohQ" target="_blank" rel="noopener">Olimex ESP32 DevKitC</a> (*) as it was equipped with two rows of sockets. This is easy to connect with jumper wires while not leave pins exposed to risk of short circuits.</p>
<p>This plan was short lived, because I quickly ran into a problem: The ATmega at the heart of an Arduino is a beefy 5V part that can supply up to 40 mA per pin. In contrast, the ESP32 is rather delicate 3.3V part that should not exceed 12 mA per pin. The data sheet for the ZETA4 controller I want to connect to this board expects a minimum of 3.5V to signal step and direction, which means I need external components to shift the ESP32 voltage level up to what the ZETA4 expects. When I made this discovery I was momentarily tempted to switch back to an ATmega solution, but the siren call of higher performance carried me forward.</p>
<p>Since I would need external components, the project brain switched to my <a href="https://amzn.to/2lGJsSx" target="_blank" rel="noopener">HiLetgo ESP32 development board</a>Â (*) which is mostly identical but came equipped with two rows of pins appropriate for a breadboard. Four level-shifting units were installed, each built around a 2N2222A transistor. They were connected to the step and direction pins for X and Y axis, and each received a LED (and corresponding current-limiting resistor) to indicate activity.</p>
<p>Staying consistent with the system I used for Glow Flow, red LEDs indicate X axis activity and green LEDs indicate Y. These LEDs allowed me to perform a quick test to verify the presence of blinking activity. Next step: <a href="https://newscrewdriver.com/2019/08/18/successful-first-commands-from-grbl-esp32-to-parker-zeta4/">connected them to ZETA4 controller</a> to see if the motors move as commanded.</p>
<hr>
<p>(*) Disclosure: As an Amazon Associate I earn from qualifying purchases.</body></html></p>
