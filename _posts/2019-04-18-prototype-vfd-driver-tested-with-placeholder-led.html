---
layout: post
title: Prototype VFD Driver Tested With Placeholder LED
date: 2019-04-18 12:30:14.000000000 +00:00
type: post
post_id: '18354'
parent_id: '0'
published: true
password: ''
status: publish
categories:
- PIC Microcontrollers
tags:
- VFD
meta:
  _oembed_98354a9e7196e236491fcbdac039779a: <div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="500" data-dnt="true"><p lang="en" dir="ltr">Now
    up to 8 digits and testing marquee mode. Some timing issues visible but good enough
    to give thanks to <a href="https://twitter.com/RueNahcMohr?ref_src=twsrc%5Etfw">@RueNahcMohr</a>
    for helping <a href="https://twitter.com/MLE_Online?ref_src=twsrc%5Etfw">@MLE_Online</a>
    and I on this project. <a href="https://t.co/YsL6M9dFit">pic.twitter.com/YsL6M9dFit</a></p>&mdash;
    Roger Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1116149802767532032?ref_src=twsrc%5Etfw">April
    11, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>
  _oembed_time_98354a9e7196e236491fcbdac039779a: '1555488685'
  _oembed_97a324703c3a92affc77a95b4029b942: '<div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="500" data-dnt="true"><p lang="en" dir="ltr">Breadboard
    contraption <a href="https://twitter.com/MLE_Online?ref_src=twsrc%5Etfw">@MLE_Online</a>
    started building at <a href="https://twitter.com/hashtag/SGVHAK?src=hash&amp;ref_src=twsrc%5Etfw">#SGVHAK</a>
    has been transferred to soldered PCB. RPi3 can now update what&#39;s shown on
    LED via I2C. Good progress towards our real goal: drive a vacuum fluorescent display.
    <a href="https://t.co/J2pP4F4Htz">pic.twitter.com/J2pP4F4Htz</a></p>&mdash; Roger
    Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1116112472212008960?ref_src=twsrc%5Etfw">April
    10, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>'
  _oembed_time_97a324703c3a92affc77a95b4029b942: '1555489067'
  _oembed_c12965be1929bb73f0ff8442f7e8f228: <div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="500" data-dnt="true"><p lang="en" dir="ltr">Actual
    integration with vacuum fluorescent display is on hold while I recover from sickness.
    In the meantime, start playing with fun patterns on placeholder LED. <a href="https://t.co/QlkaqzsF5e">pic.twitter.com/QlkaqzsF5e</a></p>&mdash;
    Roger Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1117588376222224384?ref_src=twsrc%5Etfw">April
    15, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>
  _oembed_time_c12965be1929bb73f0ff8442f7e8f228: '1555489068'
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
  timeline_notification: '1555615844'
  _oembed_86b8eb270c1f81b0da01dceb0dd7ee75: '<div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="550" data-dnt="true"><p lang="en" dir="ltr">Breadboard
    contraption <a href="https://twitter.com/MLE_Online?ref_src=twsrc%5Etfw">@MLE_Online</a>
    started building at <a href="https://twitter.com/hashtag/SGVHAK?src=hash&amp;ref_src=twsrc%5Etfw">#SGVHAK</a>
    has been transferred to soldered PCB. RPi3 can now update what&#39;s shown on
    LED via I2C. Good progress towards our real goal: drive a vacuum fluorescent display.
    <a href="https://t.co/J2pP4F4Htz">pic.twitter.com/J2pP4F4Htz</a></p>&mdash; Roger
    Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1116112472212008960?ref_src=twsrc%5Etfw">April
    10, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>'
  _oembed_time_86b8eb270c1f81b0da01dceb0dd7ee75: '1555615843'
  _oembed_4a1abc94ddcd3bb1b11224a4450ead7a: '<div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="550" data-dnt="true"><p lang="en" dir="ltr">Breadboard
    contraption <a href="https://twitter.com/MLE_Online?ref_src=twsrc%5Etfw">@MLE_Online</a>
    started building at <a href="https://twitter.com/hashtag/SGVHAK?src=hash&amp;ref_src=twsrc%5Etfw">#SGVHAK</a>
    has been transferred to soldered PCB. RPi3 can now update what&#39;s shown on
    LED via I2C. Good progress towards our real goal: drive a vacuum fluorescent display.
    <a href="https://t.co/J2pP4F4Htz">pic.twitter.com/J2pP4F4Htz</a></p>&mdash; Roger
    Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1116112472212008960?ref_src=twsrc%5Etfw">April
    10, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>'
  _oembed_a1263e38d6349012c8a126525acefc60: <div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="550" data-dnt="true"><p lang="en" dir="ltr">Now
    up to 8 digits and testing marquee mode. Some timing issues visible but good enough
    to give thanks to <a href="https://twitter.com/RueNahcMohr?ref_src=twsrc%5Etfw">@RueNahcMohr</a>
    for helping <a href="https://twitter.com/MLE_Online?ref_src=twsrc%5Etfw">@MLE_Online</a>
    and I on this project. <a href="https://t.co/YsL6M9dFit">pic.twitter.com/YsL6M9dFit</a></p>&mdash;
    Roger Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1116149802767532032?ref_src=twsrc%5Etfw">April
    11, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>
  _oembed_time_a1263e38d6349012c8a126525acefc60: '1555615843'
  _oembed_9bbb46df90a35525f2f1a38af64b9ef6: <div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="550" data-dnt="true"><p lang="en" dir="ltr">Actual
    integration with vacuum fluorescent display is on hold while I recover from sickness.
    In the meantime, start playing with fun patterns on placeholder LED. <a href="https://t.co/QlkaqzsF5e">pic.twitter.com/QlkaqzsF5e</a></p>&mdash;
    Roger Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1117588376222224384?ref_src=twsrc%5Etfw">April
    15, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>
  _oembed_time_9bbb46df90a35525f2f1a38af64b9ef6: '1555615843'
  _publicize_job_id: '29908626157'
  _oembed_47ffb7590fdf1feff53f11a23adbee1c: '<div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="550" data-dnt="true"><p lang="en" dir="ltr">Breadboard
    contraption <a href="https://twitter.com/MLE_Online?ref_src=twsrc%5Etfw">@MLE_Online</a>
    started building at <a href="https://twitter.com/hashtag/SGVHAK?src=hash&amp;ref_src=twsrc%5Etfw">#SGVHAK</a>
    has been transferred to soldered PCB. RPi3 can now update what&#39;s shown on
    LED via I2C. Good progress towards our real goal: drive a vacuum fluorescent display.
    <a href="https://t.co/J2pP4F4Htz">pic.twitter.com/J2pP4F4Htz</a></p>&mdash; Roger
    Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1116112472212008960?ref_src=twsrc%5Etfw">April
    10, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>'
  _oembed_time_47ffb7590fdf1feff53f11a23adbee1c: '1555615846'
  _oembed_327cb442a081a88adb31f4d911b82b7d: <div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="550" data-dnt="true"><p lang="en" dir="ltr">Now
    up to 8 digits and testing marquee mode. Some timing issues visible but good enough
    to give thanks to <a href="https://twitter.com/RueNahcMohr?ref_src=twsrc%5Etfw">@RueNahcMohr</a>
    for helping <a href="https://twitter.com/MLE_Online?ref_src=twsrc%5Etfw">@MLE_Online</a>
    and I on this project. <a href="https://t.co/YsL6M9dFit">pic.twitter.com/YsL6M9dFit</a></p>&mdash;
    Roger Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1116149802767532032?ref_src=twsrc%5Etfw">April
    11, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>
  _oembed_time_327cb442a081a88adb31f4d911b82b7d: '1555615846'
  _oembed_4451005a6b467ce962da4a7a0ec38098: <div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="550" data-dnt="true"><p lang="en" dir="ltr">Actual
    integration with vacuum fluorescent display is on hold while I recover from sickness.
    In the meantime, start playing with fun patterns on placeholder LED. <a href="https://t.co/QlkaqzsF5e">pic.twitter.com/QlkaqzsF5e</a></p>&mdash;
    Roger Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1117588376222224384?ref_src=twsrc%5Etfw">April
    15, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>
  _oembed_time_4451005a6b467ce962da4a7a0ec38098: '1555615846'
  _oembed_time_4a1abc94ddcd3bb1b11224a4450ead7a: '1555615857'
  _oembed_df94bedb85a30b95f6069a2f784a2fe4: <div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="550" data-dnt="true"><p lang="en" dir="ltr">Now
    up to 8 digits and testing marquee mode. Some timing issues visible but good enough
    to give thanks to <a href="https://twitter.com/RueNahcMohr?ref_src=twsrc%5Etfw">@RueNahcMohr</a>
    for helping <a href="https://twitter.com/MLE_Online?ref_src=twsrc%5Etfw">@MLE_Online</a>
    and I on this project. <a href="https://t.co/YsL6M9dFit">pic.twitter.com/YsL6M9dFit</a></p>&mdash;
    Roger Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1116149802767532032?ref_src=twsrc%5Etfw">April
    11, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>
  _oembed_time_df94bedb85a30b95f6069a2f784a2fe4: '1555615858'
  _oembed_da480e4b55e522faf2582d16307c0264: <div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="550" data-dnt="true"><p lang="en" dir="ltr">Actual
    integration with vacuum fluorescent display is on hold while I recover from sickness.
    In the meantime, start playing with fun patterns on placeholder LED. <a href="https://t.co/QlkaqzsF5e">pic.twitter.com/QlkaqzsF5e</a></p>&mdash;
    Roger Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1117588376222224384?ref_src=twsrc%5Etfw">April
    15, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>
  _oembed_time_da480e4b55e522faf2582d16307c0264: '1555615858'
  _oembed_49381cc07c297a81d0fd27bb86893587: <div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="500" data-dnt="true"><p lang="en" dir="ltr">Woooowooowooo!
    The salvaged vacuum fluorescent display lives. <a href="https://twitter.com/Regorlas?ref_src=twsrc%5Etfw">@Regorlas</a>
    built the driver board and did all the programming, and tonight we wired it up<br><br>Thanks
    to <a href="https://twitter.com/RueNahcMohr?ref_src=twsrc%5Etfw">@RueNahcMohr</a>
    for all his advice and counsel as we worked through this <a href="https://t.co/YYV6d6ni89">pic.twitter.com/YYV6d6ni89</a></p>&mdash;
    Emily Velasco (@MLE_Online) <a href="https://twitter.com/MLE_Online/status/1117983036828573696?ref_src=twsrc%5Etfw">April
    16, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>
  _oembed_time_49381cc07c297a81d0fd27bb86893587: '1555653951'
  _oembed_2c4e4f840c30b294d5bd440257440080: '<div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="500" data-dnt="true"><p lang="en" dir="ltr">Tonight
    at <a href="https://twitter.com/hashtag/SGVHAK?src=hash&amp;ref_src=twsrc%5Etfw">#SGVHAK</a>:
    big milestone in collaboration with <a href="https://twitter.com/MLE_Online?ref_src=twsrc%5Etfw">@MLE_Online</a>
    to bring a salvaged vacuum fluorescent display back to life. Now that it does
    our bidding, we&#39;ll have to design something cool (and not a clock) to use
    it in. <a href="https://t.co/sCY1USUOBR">pic.twitter.com/sCY1USUOBR</a></p>&mdash;
    Roger Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1118038708442124289?ref_src=twsrc%5Etfw">April
    16, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>'
  _oembed_time_2c4e4f840c30b294d5bd440257440080: '1555653966'
  _oembed_a09bce85bbae16edad566dda5a9b9fed: '<div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="550" data-dnt="true"><p lang="en" dir="ltr">Breadboard
    contraption <a href="https://twitter.com/MLE_Online?ref_src=twsrc%5Etfw">@MLE_Online</a>
    started building at <a href="https://twitter.com/hashtag/SGVHAK?src=hash&amp;ref_src=twsrc%5Etfw">#SGVHAK</a>
    has been transferred to soldered PCB. RPi3 can now update what&#39;s shown on
    LED via I2C. Good progress towards our real goal: drive a vacuum fluorescent display.
    <a href="https://t.co/J2pP4F4Htz">pic.twitter.com/J2pP4F4Htz</a></p>&mdash; Roger
    Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1116112472212008960?ref_src=twsrc%5Etfw">April
    10, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>'
  _oembed_time_a09bce85bbae16edad566dda5a9b9fed: '1708471073'
  _oembed_4b7d11727f41f4e7adc917564a8ae8c8: <div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="550" data-dnt="true"><p lang="en" dir="ltr">Now
    up to 8 digits and testing marquee mode. Some timing issues visible but good enough
    to give thanks to <a href="https://twitter.com/RueNahcMohr?ref_src=twsrc%5Etfw">@RueNahcMohr</a>
    for helping <a href="https://twitter.com/MLE_Online?ref_src=twsrc%5Etfw">@MLE_Online</a>
    and I on this project. <a href="https://t.co/YsL6M9dFit">pic.twitter.com/YsL6M9dFit</a></p>&mdash;
    Roger Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1116149802767532032?ref_src=twsrc%5Etfw">April
    11, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>
  _oembed_time_4b7d11727f41f4e7adc917564a8ae8c8: '1708471074'
  _oembed_b76be95c308f5be096fabf69aeb72f70: <div class="embed-twitter"><blockquote
    class="twitter-tweet" data-width="550" data-dnt="true"><p lang="en" dir="ltr">Actual
    integration with vacuum fluorescent display is on hold while I recover from sickness.
    In the meantime, start playing with fun patterns on placeholder LED. <a href="https://t.co/QlkaqzsF5e">pic.twitter.com/QlkaqzsF5e</a></p>&mdash;
    Roger Cheng (@Regorlas) <a href="https://twitter.com/Regorlas/status/1117588376222224384?ref_src=twsrc%5Etfw">April
    15, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js"
    charset="utf-8"></script></div>
  _oembed_time_b76be95c308f5be096fabf69aeb72f70: '1708471074'
  _elasticsearch_data_sharing_indexed_on: '2024-11-18 13:24:16'
author:
  login: inkarc
  email: luxo.lamp@gmail.com
  display_name: Roger Cheng
  first_name: Roger
  last_name: Cheng
permalink: "/2019/04/18/prototype-vfd-driver-tested-with-placeholder-led/"
---
<p><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"><br />
<html><body><br />
<img class="alignnone size-full wp-image-18326" src="https://newscrewdriver.com/wp-content/uploads/2019/04/pic16f18345-vfd-driver-pcb.jpg" alt="PIC16F18345 VFD driver PCB" width="1600" height="900"></p>
<p>Once I had <a href="https://newscrewdriver.com/2019/04/17/assembling-prototype-vfd-driver-pcb/">assembled our first prototype</a> vacuum fluorescent display (VFD) driver circuit board, it's tempting to connect it right up to our salvaged VFD and bask in its glow. But that would have been premature: there were bugs still to be ironed out with potential for fatal errors to damage or destroy our one and only salvaged VFD.</p>
<p>The first tests were what we used to test our bread board prototype: drive a 4-digit 7-segment LED, a Lite-On LTC4627-JR from my <a href="https://github.com/Roger-random/I2C_LTC-4627JR">earlier PIC display driver project</a>. From there I could verify 8 of 11 segments on this driver board functioned as expected by a demo program that constantly flips between two patterns, one spells "Hello" and the other "Ahoy".</p>
<p>I then tested the I²C capability with a small update, changing the second pattern from "Anoy" to a very mutilated "MLE". (It's hard to do "M" on 7 segments.)</p>
<p>https://twitter.com/Regorlas/status/1116112472212008960</p>
<p>These experiments exposed a few minor bugs, just as tests were supposed to. After they were fixed I expanded my test with a second LTC4627-JR for eight total segments. I also expanded my use of I²C by continuously updating all digits from Raspberry Pi to create a text marquee. This experiment exposed some timing issues that is visible as a slight lag just as the "u" in "thank you" came up on screen.</p>
<p>https://twitter.com/Regorlas/status/1116149802767532032</p>
<p>That lag was diagnosed to my code inside a timer interrupt service routine (ISR). On a simple chip like this PIC, a hardware interrupt signal could not interrupt another ISR already in progress. So when my code inside a timer ISR grew beyond a certain point, it started interfering with timely response to hardware interrupts necessary for I²C communication. The solution is to put my timer ISR on a severe diet, moving almost all of its bulk elsewhere so that I²C handlers could run with minimal interference.</p>
<p>Once the software problems were sorted out, I started experimenting with the flexibility given by this project's <a href="https://newscrewdriver.com/2019/04/13/why-and-how-of-simpler-pic-display-driver/">design decision to keep PIC code simple</a>. It meant I could play with patterns that have nothing to do with displaying letters or text. I decided to try a pattern that keeps a single lighted segment running through the display in a figure 8. When cycled through all digits like a text marquee, it gave us a neat looking wave. I look forward to more experiments in driving a multi-segmented display in unusual ways.</p>
<p>https://twitter.com/Regorlas/status/1117588376222224384</body></html></p>
