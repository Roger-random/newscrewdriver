---
layout: post
title: Canon Pixma MX340 Control Panel Circuit Board Photo Stitch
date: 2023-12-18 12:30:00.000000000 +00:00
type: post
post_id: '41090'
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Teardown
tags:
- inkjet
meta:
  _last_editor_used_jetpack: block-editor
  _thumbnail_id: '40433'
  timeline_notification: '1702931411'
  _publicize_job_id: '90390763011'
  firehose_sent: '1702931410'
  wordads_ufa: s:wpcom-ufa-v4:1703391254
  _elasticsearch_data_sharing_indexed_on: '2024-11-18 13:37:21'
author:
  login: inkarc
  email: luxo.lamp@gmail.com
  display_name: Roger Cheng
  first_name: Roger
  last_name: Cheng
permalink: "/2023/12/18/canon-pixma-mx340-control-panel-circuit-board-stitch/"
---
<p><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"><br />
<!-- wp:paragraph --><html><body></p>
<p>Poking around internals of a retired Canon Pixma MX340 multi-function inkjet, I decided its control panel circuit board was within my skill level to decipher. After <a href="https://newscrewdriver.com/2023/12/17/canon-pixma-mx340-control-panel-lcd-to-ic/">following a set of five wires</a> from control board LCD screen to the biggest chip on the board, I think the next effort is to trace out the relationship between that chip and all components on this circuit board. I started doing this by eye but the traces are thin, the contrast is low, and my eyesight isn't what it used to be. If I will be tackling many more similar projects, I might invest in a magnifier or microscope designed for circuit board work. But for today, I'll use what I already have on hand: taking pictures with my <a href="https://newscrewdriver.com/2023/10/03/dusting-off-canon-eos-m100/" target="_blank" rel="noreferrer noopener">camera + macro lens</a> then stitch them together.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>In order to keep the circuit board traces as well as surface component markings in focus, I need to narrow the aperture for greater depth of field. I also wanted to <a href="https://newscrewdriver.com/2023/10/04/polarizing-filter-photography-is-magic/" target="_blank" rel="noreferrer noopener">use my polarizing filter</a> to eliminate glare. Both decisions reduced the amount of light reaching my camera sensor. To compensate, I can increase sensitivity, but that adds noise and I don't want a noisy picture when looking at fine copper traces. The alternate solution is to increase shutter time, which meant setting up my tripod to keep my camera steady during long duration shots. I ended up using an 8 second shutter time in order to stay at low noise ISO 100 sensitivity.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>For each picture, I wanted to fill my imaging area with circuit board. The aspect ratio of the circuit board meant I could cover the entire width with four pictures. However, that means a seam somewhere in the middle where all the important bits (main board connector, LCD connector) are located so I decided to take five pictures. One center shot with all the important bits together in one shot, then two pictures on either side.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Once I had the pictures, I brought them into my photo editor putting each image into its own layer. I brought the center image to the foreground, the edge most images to the back, and intermediate images between them. I then scaled image in each layer so all the copper circuit traces lined up at the edges. Looks like I didn't manage to maintain distance between camera and circuit board, because this resulted in a slightly trapezoidal shape.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>After the traces were all lined up, I adjusted image color levels to bring out contrast of copper circuit traces. Doing this meant blowing out bright parts and dark details got crushed, but I decided that's not important for this project. I also decided not to worry about the fact seams are very noticeable, because color balance changed between pictures.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>I didn't use panorama photo stitching software here because they have different goals. They fix color balance, warp perspective, and blend edges to create a pretty picture. For this project, I'm not looking for pretty, I'm looking for accurate. When I'm following a copper trace across the board, I want to be confident I'm following real untouched data and not misled by something that had been modified to look pretty.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:image {"id":41091,"width":"840px","height":"auto","sizeSlug":"large","linkDestination":"media","align":"center"} --></p>
<figure class="wp-block-image aligncenter size-large is-resized"><a href="https://newscrewdriver.com/wp-content/uploads/2023/12/canon-pixma-mx340-control-panel-pcb-stitch-exagerrated-contrast-1920x371-1.jpg" target="_blank" rel=" noreferrer noopener"><img src="https://newscrewdriver.com/wp-content/uploads/2023/12/canon-pixma-mx340-control-panel-pcb-stitch-exagerrated-contrast-1920x371-1.jpg?w=1024" alt="" class="wp-image-41091" style="width:840px;height:auto"></a></figure>
<p><!-- /wp:image --></p>
<p><!-- wp:paragraph --></p>
<p>Here is a low-resolution version of the result. If anyone else wants a look, the <a href="https://github.com/Roger-random/canon_mx340/tree/main/control_panel_pcb" target="_blank" rel="noreferrer noopener">full resolution version (and original set of five images) are up on my GitHub</a> as they are too large to be hosted here. Obviously I'll use the full resolution version for <a href="https://newscrewdriver.com/2023/12/19/canon-pixma-mx340-control-panel-power-button-and-led/">further circuit board exploration</a>.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:separator --></p>
<hr class="wp-block-separator has-alpha-channel-opacity">
<!-- /wp:separator --></p>
<p><!-- wp:paragraph {"align":"center"} --></p>
<p class="has-text-align-center">This teardown ran far longer than I originally thought it would. <a href="https://newscrewdriver.com/2023/11/14/canon-pixma-mx340-pre-teardown-overview/" target="_blank" rel="noreferrer noopener">Click here for the starting point</a>.</p>
<p><!-- /wp:paragraph --><br />
</body></html></p>
