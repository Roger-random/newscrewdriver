---
layout: post
title: First Run with DS18B20 Temperature Sensor
date: 2022-08-07 12:30:00.000000000 +00:00
type: post
post_id: '31863'
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Projects
tags:
- ESP8266
- ESPHome
- Home Assistant
meta:
  _last_editor_used_jetpack: block-editor
  _thumbnail_id: '31864'
  _publicize_job_id: '75535528465'
  timeline_notification: '1659900627'
  _elasticsearch_data_sharing_indexed_on: '2024-11-18 13:32:38'
author:
  login: inkarc
  email: luxo.lamp@gmail.com
  display_name: Roger Cheng
  first_name: Roger
  last_name: Cheng
permalink: "/2022/08/07/first-run-with-ds18b20-temperature-sensor/"
---
<p><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"><br />
<!-- wp:paragraph --><html><body></p>
<p>I have a <a href="https://newscrewdriver.com/2022/08/06/bedside-fan-and-light-v2/">revised bedside fan</a> (now with integrated LED illumination) up and running, and now it needs a temperature sensor. The goal is so I could automate turning off the fan once things cool down. My previous attempt used a TMP36 sensor that reported results as an analog voltage level. The results made me feel it was <a rel="noreferrer noopener" href="https://newscrewdriver.com/2022/07/27/tmp36-temperature-sensor-esp8266-not-a-great-team/" target="_blank">not a good fit with ESP8266</a> ADC peripheral. I don't blame Espressif, it's just a matter of different ADC designed for different usage requirements.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>As an alternative to TMP36, I wanted to try a sensor that has its own integrated analog circuitry designed for the purpose and reported measurements via a digital communication protocol. Between what I could find in how-to guides and listed by vendors competing on price, I found my next candidate to be <a href="https://www.maximintegrated.com/en/products/sensors/DS18B20.html" target="_blank" rel="noreferrer noopener">Maxim Semiconductor DS18B20 1-Wire Digital Thermometer</a>. Another point in favor of this sensor is that it is frequently sold already packaged in a waterproof enclosure and a length of wire. This helps me place the sensor far enough away to avoid the heat generated by a running ESP8266. The lowest-bidder of the day <a rel="noreferrer noopener" href="https://amzn.to/3S6so2Q" target="_blank">sold them in a multipack of 15</a> (*) so that's what I bought.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>When I read through <a rel="noreferrer noopener" href="https://datasheets.maximintegrated.com/en/ds/DS18B20.pdf" target="_blank">the DS18B20 datasheet</a>, I was a little wary of its "1-Wire" data bus because I wasn't sure I wanted to spend the time to implement another protocol. But I need not have worried: I only planned to use it with an ESP8266 running ESPHome, and somebody has already integrated <a rel="noreferrer noopener" href="https://esphome.io/components/sensor/dallas.html" target="_blank">the code to use these sensors</a>.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>The hardware side was simple: red wire to 3.3V, black wire to ground, and yellow wire to an ESP8266 pin. The only catch is that 1-Wire protocol requires a 4.7kÎ© pull-up resistor so the chosen ESP8266 pin must be able to tolerate one. On my first try, I connected the data wire to Wemos D1 Mini pin D8 a.k.a. ESP8266 GPIO15 out of convenience. (It was easy to lay out on my circuit board.) Naturally Murphy's Law ensured that I chose the pin that, if pulled high, <a rel="noreferrer noopener" href="https://randomnerdtutorials.com/esp8266-pinout-reference-gpios/" target="_blank">would prevent an ESP8266 from booting</a>. I had to move the data wire (and the pull-up resistor) to another pin before things would run. And now that it's up and running, I think leveraging an Arduino library to read digital messages of DS18B20 measurement is preferable to using ESP8266 ADC to read TMP36 sensor voltage. Not to mention the convenience of having the sensor already encased and connected to a length of wire. This will be my go-to temperature sensor until I find a reason to try another.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:separator --></p>
<hr class="wp-block-separator has-alpha-channel-opacity">
<!-- /wp:separator --></p>
<p><!-- wp:paragraph {"align":"center"} --></p>
<p class="has-text-align-center">(*) Disclosure: As an Amazon Associate I earn from qualifying purchases.</p>
<p><!-- /wp:paragraph --><br />
</body></html></p>
